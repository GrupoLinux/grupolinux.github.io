I"ï<p>Considerando que j√° tenha configurado o ambiente e esteja funcionando na VPS, incluindo o GIT. Chegou a hora de automatizar o deploy da aplica√ß√£o. Esse √© o objetivo deste post.</p>

<p>Na VPS cria dois diret√≥rios, uma para o reposit√≥rio e outro para aplica√ß√£o</p>

<p>reposit√≥rio: <strong>/var/repo/projeto.git</strong></p>

<p>aplica√ß√£o: <strong>/var/www/html/projeto</strong></p>

<p>```# mkdir /var/repo</p>
<h1 id="mkdir-varrepoprojetogit">mkdir /var/repo/projeto.git</h1>
<h1 id="cd-varrepoprojetogit">cd /var/repo/projeto.git</h1>
<h1 id="git-init-bare">git init ‚Äìbare</h1>
<h1 id="cd-hooks">cd hooks</h1>
<h1 id="vim-post-receive">vim post-receive</h1>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
```#!/bin/bash  
git --work-tree=/var/www/html/projeto --git-dir=/var/repo/projeto.git checkout -f
</code></pre></div></div>

<p>ESC +:wq (Salvar e sair do editor Vim)</p>

<p>```# chmod +x post-receive</p>
<h1 id="chown--r-usuariousuario-varrepoprojetogit">chown -R usuario:usuario /var/repo/projeto.git</h1>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  
```# mkdir /var/www/html/projeto  
# chown R www-data:www-data /var/www/html/projeto
</code></pre></div></div>

<p>Agora na m√°quina de desenvolvimento</p>

<p>Acesse o diret√≥rio do projeto, execute</p>

<p>Adicionar o reposit√≥rio deploy da VPS no remote</p>

<p>```git remote add deploy ssh://usuario@IP_VPS/var/repo/projeto.git<br />
git add .<br />
git commit -m ‚Äúprimeiro commit‚Äù<br />
git push origin master<br />
git push deploy master</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
Para visualizar os commits

`git log --all --graph --decorate --oneline`

Caso ocorra algum erro de permiss√£o, execute o hooks/post-receive manualmente
s
```#cd /var/repo/projeto.git/hooks  
#./post-receive
</code></pre></div></div>

<p>Feito!</p>
:ET