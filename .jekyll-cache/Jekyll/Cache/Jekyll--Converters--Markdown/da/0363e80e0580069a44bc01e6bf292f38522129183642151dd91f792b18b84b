I"<p>Considerando que j√° tenha configurado o ambiente e esteja funcionando na VPS, incluindo o GIT. Chegou a hora de automatizar o deploy da aplica√ß√£o. Esse √© o objetivo deste post. Na VPS cria dois diret√≥rios, uma para o reposit√≥rio e outro para aplica√ß√£o reposit√≥rio: <strong>/var/repo/projeto.git</strong> aplica√ß√£o: <strong>/var/www/html/projeto</strong> <code class="highlighter-rouge"># mkdir /var/repo # mkdir /var/repo/projeto.git # cd /var/repo/projeto.git # git init --bare # cd hooks # vim post-receive</code> <code class="highlighter-rouge"><span class="c">#!/bin/bash git --work-tree=/var/www/html/projeto --git-dir=/var/repo/projeto.git checkout -f</span></code> ESC +:wq (Salvar e sair do editor Vim) <code class="highlighter-rouge"># chmod +x post-receive # chown -R usuario:usuario /var/repo/projeto.git # mkdir /var/www/html/projeto # chown R www-data:www-data /var/www/html/projeto</code> Agora na m√°quina de desenvolvimento Acesse o diret√≥rio do projeto, execute Adicionar o reposit√≥rio deploy da VPS no remote <code class="highlighter-rouge">git remote add deploy ssh://usuario@IP_VPS/var/repo/projeto.git git add . git commit -m "primeiro commit" git push origin master git push deploy master</code> Para visualizar os commits <code class="highlighter-rouge">git log --all --graph --decorate --oneline</code> Caso ocorra algum erro de permiss√£o, execute o hooks/post-receive manualmente <code class="highlighter-rouge">#cd /var/repo/projeto.git/hooks #./post-receive</code> Feito!</p>
:ET